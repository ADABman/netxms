*************
* 43 ==> 44 *
*************

- Added table "agent_configs":
	CREATE TABLE agent_configs
	(
		config_id integer not null,
		config_name varchar(255) not null,
		config_file SQL_TEXT not null,
		config_filter SQL_TEXT not null,
		sequence_number integer not null,
		PRIMARY KEY(config_id)
	) TABLE_TYPE;
- New object tools added:
	INSERT INTO object_tools (tool_id,tool_name,tool_type,tool_data,flags,matching_oid,description)
		VALUES (13,'&Info->&Process list',3,
                	'Process List#7FSystem.ProcessList#7F^([0-9]+) (.*)',2,'','Show list of currently running processes');
	INSERT INTO object_tools_table_columns (tool_id,col_number,col_name,col_oid,col_format,col_substr)
		VALUES (13,0,'PID','',0,1);
	INSERT INTO object_tools_table_columns (tool_id,col_number,col_name,col_oid,col_format,col_substr)
		VALUES (13,1,'Name','',0,2);
	INSERT INTO object_tools_acl (tool_id,user_id) VALUES (13,-2147483648);
- New configuration parameter: DBLockPID (hidden)


*************
* 42 ==> 43 *
*************

- New configuration parameter: RADIUSPort


*************
* 41 ==> 42 *
*************

- Added table "conditions":
	CREATE TABLE conditions
	(
		id integer not null,
		activation_event integer not null,
		deactivation_event integer not null,
		source_object integer not null,
		active_status integer not null,
		inactive_status integer not null,
		script SQL_TEXT not null,
		PRIMARY KEY(id)
	) TABLE_TYPE;
- Added table "cond_dci_map":
	CREATE TABLE cond_dci_map
	(
		condition_id integer not null,
		dci_id integer not null,
		node_id integer not null,
		dci_func integer not null,
		num_polls integer not null,
		PRIMARY KEY(condition_id,dci_id)
	) TABLE_TYPE;
- New configuration parameters: NumberOfConditionPollers, ConditionPollingInterval
- New image records:
	INSERT INTO images (image_id,name,file_name_png,file_hash_png,file_name_ico,file_hash_ico)
		VALUES (15,'Obj.Condition','condition.png','<invalid_hash>',
                	'condition.ico','<invalid_hash>');
	INSERT INTO default_images (object_class,image_id)
		VALUES (13, 15);
- New events added:
	INSERT INTO event_cfg (event_code,event_name,severity,flags,message,description) VALUES
		(
			34, 'SYS_CONDITION_ACTIVATED', 2, 1,
			'Condition "%2" activated',
			'Default event for condition activation.#0D#0A' CONCAT
			'Parameters:#0D#0A' CONCAT
			'   1) Condition object ID#0D#0A' CONCAT
			'   2) Condition object name#0D#0A' CONCAT
			'   3) Previous condition status#0D#0A' CONCAT
			'   4) Current condition status'
		);
	INSERT INTO event_cfg (event_code,event_name,severity,flags,message,description) VALUES
		(
			35, 'SYS_CONDITION_DEACTIVATED', 0, 1,
			'Condition "%2" deactivated',
			'Default event for condition deactivation.#0D#0A' CONCAT
			'Parameters:#0D#0A' CONCAT
			'   1) Condition object ID#0D#0A' CONCAT
			'   2) Condition object name#0D#0A' CONCAT
			'   3) Previous condition status#0D#0A' CONCAT
			'   4) Current condition status'
		);
- Added new node type:
	INSERT INTO oid_to_type (pair_id,snmp_oid,node_type,node_flags)
	   VALUES (1,'.1.3.6.1.4.1.3224.1.*',2,0);


*************
* 40 ==> 41 *
*************

- New configuration parameters: RADIUSServer, RADIUSSecret, RADIUSNumRetries,
  RADIUSTimeout
- Added column "guid" to table "users":
	ALTER TABLE users ADD guid varchar(36) not null;
- Added column "auth_method" to table "users":
	ALTER TABLE users ADD auth_method integer not null;
- Added column "guid" to table "user_groups":
	ALTER TABLE user_groups ADD guid varchar(36) not null;


*************
* 39 ==> 40 *
*************

- Added column "grace_logins" to table "users":
	ALTER TABLE users ADD grace_logins integer;
	UPDATE users SET grace_logins=5;


*************
* 38 ==> 39 *
*************

- Added configuration parameter "DisableVacuum"
- Added configuration parameter "LockTimeout"
- Added table "maps":
	CREATE TABLE maps
	(
		map_id integer not null,
		map_name varchar(255) not null,
		description SQL_TEXT not null,
		root_object_id integer not null,
		PRIMARY KEY(map_id)
	) TABLE_TYPE;
- Added table "map_access_lists":
	CREATE TABLE map_access_lists
	(
		map_id integer not null,
		user_id integer not null,
		access_rights integer not null,
		PRIMARY KEY(map_id,user_id)
	) TABLE_TYPE;
- Added table "submaps":
	CREATE TABLE submaps
	(
		map_id integer not null,
		submap_id integer not null,
		attributes integer not null,	
		PRIMARY KEY(map_id,submap_id)
	) TABLE_TYPE;
- Added table "submap_object_positions":
	CREATE TABLE submap_object_positions
	(
		map_id integer not null,
		submap_id integer not null,
		object_id integer not null,
		x integer not null,
		y integer not null,
		PRIMARY KEY(map_id,submap_id,object_id)
	) TABLE_TYPE;
- Added table "submap_links":
	CREATE TABLE submap_links
	(
		map_id integer not null,
		submap_id integer not null,
		object_id1 integer not null,
		object_id2 integer not null,
		link_type integer not null,
		PRIMARY KEY(map_id,submap_id,object_id1,object_id2)
	) TABLE_TYPE;
- Added default map configuration:
	INSERT INTO maps (map_id,map_name,description,root_object_id)
		VALUES (1,'Default','Default network map',1);
	INSERT INTO map_access_lists (map_id,user_id,access_rights) VALUES (1,-2147483648,1);
- Added event SYS_SCRIPT_ERROR:
	INSERT INTO event_cfg (event_code,event_name,severity,flags,message,description) VALUES
		(
			33, 'SYS_SCRIPT_ERROR',	2, 1,
			'Script (%1) execution error: %2',
			'Generated when server encounters NXSL script execution error.#0D#0A' CONCAT
			'Parameters:#0D#0A' CONCAT
			'   1) Script name#0D#0A' CONCAT
			'   2) Error text#0D#0A' CONCAT
			'   3) DCI ID if script is DCI transformation script, or 0 otherwise'
		);


*************
* 37 ==> 38 *
*************

- Added table "snmp_trap_log":
	CREATE TABLE snmp_trap_log
	(
		trap_id SQL_INT64 not null,
		trap_timestamp integer not null,
		ip_addr varchar(15) not null,
		object_id integer not null,
		trap_oid varchar(255) not null,
		trap_varlist SQL_TEXT not null,
		PRIMARY KEY(trap_id)
	) TABLE_TYPE;
        CREATE INDEX idx_snmp_trap_log_trap_timestamp ON snmp_trap_log(trap_timestamp);
- Indexes added to existing log tables:
	CREATE INDEX idx_event_log_event_timestamp ON event_log(event_timestamp);
	CREATE INDEX idx_syslog_msg_timestamp ON syslog(msg_timestamp);
- Added configuration parameter "LogAllSNMPTraps"


*************
* 36 ==> 37 *
*************

- Added table "script_library":
	CREATE TABLE script_library
	(
		script_id integer not null,
		script_name varchar(63) not null,
		script_code SQL_TEXT not null,
		PRIMARY KEY(script_id)
	) TABLE_TYPE;
- Added configuration parameter "DefaultCommunityString"
- Added configuration parameter "DiscoveryFilter"
- Removed table "new_nodes"
- Removed configuration parameter "NewNodePollingInterval"


*************
* 35 ==> 36 *
*************

- Added new column proxy_node to "nodes" table:
	ALTER TABLE nodes ADD proxy_node integer not null;
	UPDATE nodes SET proxy_node=0;
- Added new column matching_oid to "object_tools" table:
	ALTER TABLE object_tools ADD matching_oid varchar(255) not null;
	UPDATE object_tools SET matching_oid='#00';
- New configuration parameters added:
	INSERT INTO config (var_name,var_value,is_visible,need_server_restart)
		VALUES ('CapabilityExpirationTime','604800',1,0);


*************
* 34 ==> 35 *
*************

- Table object_properties modified:
	Column status_alg deleted
	New columns added:
		status_calc_alg integer not null,
		status_prop_alg integer not null,
		status_prop_alg integer not null,
		status_fixed_val integer not null,
		status_shift integer not null,
		status_translation varchar(8) not null,
		status_single_threshold integer not null,
		status_thresholds varchar(8) not null
- Configuration parameter should be re-created:
	INSERT INTO config (var_name,var_value,is_visible,need_server_restart)
		VALUES ('StatusCalculationAlgorithm','1',1,1);
- New configuration parameters added:
	INSERT INTO config (var_name,var_value,is_visible,need_server_restart)
		VALUES ('StatusPropagationAlgorithm','1',1,1);
	INSERT INTO config (var_name,var_value,is_visible,need_server_restart)
		VALUES ('FixedStatusValue','0',1,1);
	INSERT INTO config (var_name,var_value,is_visible,need_server_restart)
		VALUES ('StatusShift','0',1,1);
	INSERT INTO config (var_name,var_value,is_visible,need_server_restart)
		VALUES ('StatusTranslation','01020304',1,1);
	INSERT INTO config (var_name,var_value,is_visible,need_server_restart)
		VALUES ('StatusSingleThreshold','75',1,1);
	INSERT INTO config (var_name,var_value,is_visible,need_server_restart)
		VALUES ('StatusThresholds','503C2814',1,1);


*************
* 33 ==> 34 *
*************

- Added configuration variable IcmpPingSize
	INSERT INTO config (var_name,var_value,is_visible,need_server_restart)
		VALUES ('IcmpPingSize','46',1,1);
- Added configuration variable SMSDrvConfig
	INSERT INTO config (var_name,var_value,is_visible,need_server_restart)
		VALUES ('SMSDrvConfig','',1,1);
- Added table for storing syslog messages
	CREATE TABLE syslog
	(
		msg_id SQL_BIGINT not null,
		msg_timestamp integer not null,
		facility integer not null,
		severity integer not null,
		source_object_id integer not null,
		hostname varchar(127) not null,
		msg_tag varchar(32) not null,
		msg_text SQL_TEXT not null,
		PRIMARY KEY(msg_id)
	) TABLE_TYPE;
- New syslog-related parameters added:
	INSERT INTO config (var_name,var_value,is_visible,need_server_restart)
		VALUES ('EnableSyslogDaemon','0',1,1);
	INSERT INTO config (var_name,var_value,is_visible,need_server_restart)
		VALUES ('SyslogListenPort','514',1,1);
	INSERT INTO config (var_name,var_value,is_visible,need_server_restart)
		VALUES ('SyslogRetentionTime','5184000',1,0);
- New field adv_schedule of type integer added to table items. Existing items
  should have this field set to 0.
- New table for advanced DCI schedules
	CREATE TABLE dci_schedules
	(
		item_id integer not null,
		schedule varchar(255) not null
	) TABLE_TYPE;


*************
* 32 ==> 33 *
*************

- Added table object_tools_table_columns
	CREATE TABLE object_tools_table_columns
	(
		tool_id integer not null,
		col_number integer not null,
		col_name varchar(255),
		col_oid varchar(255),
		col_format integer,
		col_substr integer,
		PRIMARY KEY(tool_id,col_number)
	) TABLE_TYPE;
- Predefined tools added:
INSERT INTO object_tools (tool_id,tool_name,tool_type,tool_data,flags,description)
	VALUES (5,'&Info->&Switch forwarding database (FDB)',TOOL_TYPE_TABLE_SNMP,'Forwarding database',0,'Show switch forwarding database');
INSERT INTO object_tools_table_columns (tool_id,col_number,col_name,col_oid,col_format,col_substr)
	VALUES (5,0,'MAC Address','.1.3.6.1.2.1.17.4.3.1.1',CFMT_MAC_ADDR,0);
INSERT INTO object_tools_table_columns (tool_id,col_number,col_name,col_oid,col_format,col_substr)
	VALUES (5,1,'Port','.1.3.6.1.2.1.17.4.3.1.2',CFMT_INTEGER,0);

INSERT INTO object_tools (tool_id,tool_name,tool_type,tool_data,flags,description)
	VALUES (6,'&Connect->Open &web browser',TOOL_TYPE_URL,'http://%OBJECT_IP_ADDR%',0,'Open embedded web browser to node');
INSERT INTO object_tools (tool_id,tool_name,tool_type,tool_data,flags,description)
	VALUES (7,'&Connect->Open &web browser (HTTPS)',TOOL_TYPE_URL,'https://%OBJECT_IP_ADDR%',0,'Open embedded web browser to node using HTTPS');

INSERT INTO object_tools (tool_id,tool_name,tool_type,tool_data,flags,description)
	VALUES (8,'&Info->&Agent->&Subagent list',TOOL_TYPE_TABLE_AGENT,'Subagent List#7FAgent.SubAgentList#7F^(.*) (.*) (.*) (.*)',0,'Show list of loaded subagents');
INSERT INTO object_tools_table_columns (tool_id,col_number,col_name,col_oid,col_format,col_substr)
	VALUES (8,0,'Name','',CFMT_STRING,1);
INSERT INTO object_tools_table_columns (tool_id,col_number,col_name,col_oid,col_format,col_substr)
	VALUES (8,1,'Version','',CFMT_STRING,2);
INSERT INTO object_tools_table_columns (tool_id,col_number,col_name,col_oid,col_format,col_substr)
	VALUES (8,2,'File','',CFMT_STRING,4);
INSERT INTO object_tools_table_columns (tool_id,col_number,col_name,col_oid,col_format,col_substr)
	VALUES (8,3,'Module handle','',CFMT_STRING,3);

INSERT INTO object_tools (tool_id,tool_name,tool_type,tool_data,flags,description)
	VALUES (9,'&Info->&Agent->Supported &parameters',TOOL_TYPE_TABLE_AGENT,'Supported parameters#7FAgent.SupportedParameters#7F^(.*)',0,'Show list of parameters supported by agent');
INSERT INTO object_tools_table_columns (tool_id,col_number,col_name,col_oid,col_format,col_substr)
	VALUES (9,0,'Parameter','',CFMT_STRING,1);

INSERT INTO object_tools (tool_id,tool_name,tool_type,tool_data,flags,description)
	VALUES (10,'&Info->&Agent->Supported &enums',TOOL_TYPE_TABLE_AGENT,'Supported enums#7FAgent.SupportedEnums#7F^(.*)',0,'Show list of enums supported by agent');
INSERT INTO object_tools_table_columns (tool_id,col_number,col_name,col_oid,col_format,col_substr)
	VALUES (10,0,'Parameter','',CFMT_STRING,1);

INSERT INTO object_tools (tool_id,tool_name,tool_type,tool_data,flags,description)
	VALUES (11,'&Info->&Agent->Supported &actions',TOOL_TYPE_TABLE_AGENT,'Supported actions#7FAgent.ActionList#7F^(.*) (.*) "(.*)".*',0,'Show list of actions supported by agent');
INSERT INTO object_tools_table_columns (tool_id,col_number,col_name,col_oid,col_format,col_substr)
	VALUES (11,0,'Name','',CFMT_STRING,1);
INSERT INTO object_tools_table_columns (tool_id,col_number,col_name,col_oid,col_format,col_substr)
	VALUES (11,1,'Type','',CFMT_STRING,2);
INSERT INTO object_tools_table_columns (tool_id,col_number,col_name,col_oid,col_format,col_substr)
	VALUES (11,2,'Data','',CFMT_STRING,3);

INSERT INTO object_tools (tool_id,tool_name,tool_type,tool_data,flags,description)
	VALUES (12,'&Info->&Agent->Configured &ICMP targets',TOOL_TYPE_TABLE_AGENT,'Configured ICMP targets#7FICMP.TargetList#7F^(.*) (.*) (.*) (.*)',0,'Show list of actions supported by agent');
INSERT INTO object_tools_table_columns (tool_id,col_number,col_name,col_oid,col_format,col_substr)
	VALUES (12,0,'IP Address','',CFMT_STRING,1);
INSERT INTO object_tools_table_columns (tool_id,col_number,col_name,col_oid,col_format,col_substr)
	VALUES (12,1,'Name','',CFMT_STRING,4);
INSERT INTO object_tools_table_columns (tool_id,col_number,col_name,col_oid,col_format,col_substr)
	VALUES (12,2,'Last RTT','',CFMT_STRING,2);
INSERT INTO object_tools_table_columns (tool_id,col_number,col_name,col_oid,col_format,col_substr)
	VALUES (12,4,'Average RTT','',CFMT_STRING,3);

INSERT INTO object_tools_acl (tool_id,user_id) VALUES (5,-2147483648);
INSERT INTO object_tools_acl (tool_id,user_id) VALUES (6,-2147483648);
INSERT INTO object_tools_acl (tool_id,user_id) VALUES (7,-2147483648);
INSERT INTO object_tools_acl (tool_id,user_id) VALUES (8,-2147483648);
INSERT INTO object_tools_acl (tool_id,user_id) VALUES (9,-2147483648);
INSERT INTO object_tools_acl (tool_id,user_id) VALUES (10,-2147483648);
INSERT INTO object_tools_acl (tool_id,user_id) VALUES (11,-2147483648);
INSERT INTO object_tools_acl (tool_id,user_id) VALUES (12,-2147483648);


*************
* 31 ==> 32 *
*************

- Added table object_tools:
	CREATE TABLE object_tools
	(
		tool_id integer not null,
		tool_name varchar(255) not null,
		tool_type integer not null,
		tool_data SQL_TEXT,
		description varchar(255),
		flags integer not null,
		PRIMARY KEY(tool_id)
	) TABLE_TYPE;
- Added table object_tools_acl:
	CREATE TABLE object_tools_acl
	(
		tool_id integer not null,
		user_id integer not null,
		PRIMARY KEY(tool_id,user_id)
	) TABLE_TYPE;
- Predefined tools added:
	INSERT INTO object_tools (tool_id,tool_name,tool_type,tool_data,flags,description)
		VALUES (1,'&Shutdown system',TOOL_TYPE_ACTION,'System.Shutdown',0,'Shutdown target node via NetXMS agent');
	INSERT INTO object_tools (tool_id,tool_name,tool_type,tool_data,flags,description)
		VALUES (2,'&Restart system',TOOL_TYPE_ACTION,'System.Restart',0,'Restart target node via NetXMS agent');
	INSERT INTO object_tools (tool_id,tool_name,tool_type,tool_data,flags,description)
		VALUES (3,'&Wakeup node',TOOL_TYPE_INTERNAL,'wakeup',0,'Wakeup node using Wake-On-LAN magic packet');
	INSERT INTO object_tools (tool_id,tool_name,tool_type,tool_data,flags,description)
		VALUES (4,'Restart &agent',TOOL_TYPE_ACTION,'Agent.Restart',0,'Restart NetXMS agent on target node');
	INSERT INTO object_tools_acl (tool_id,user_id) VALUES (1,-2147483648);
	INSERT INTO object_tools_acl (tool_id,user_id) VALUES (2,-2147483648);
	INSERT INTO object_tools_acl (tool_id,user_id) VALUES (3,-2147483648);
	INSERT INTO object_tools_acl (tool_id,user_id) VALUES (4,-2147483648);


*************
* 30 ==> 31 *
*************

- Added configuration parameter NumberOfRoutingTablePollers
- Added configuration parameter RoutingTableUpdateInterval
- Added table vpn_connectors:
	CREATE TABLE vpn_connectors
	(
		id integer not null,
		node_id integer not null,
		peer_gateway integer not null,
		PRIMARY KEY(id)
	) TABLE_TYPE;
- Added table vpn_connector_networks:
	CREATE TABLE vpn_connector_networks
	(
		vpn_id integer not null,
		network_type integer not null,	// 0 == local, 1 == remote
		ip_addr varchar(15),
		ip_netmask varchar(15),
		PRIMARY KEY(vpn_id,ip_addr)
	) TABLE_TYPE;
- New images added:
	INSERT INTO default_images (object_class,image_id)
		VALUES (12, IMG_VPN_CONNECTOR);
	INSERT INTO images (image_id,name,file_name_png,file_hash_png,file_name_ico,file_hash_ico)
		VALUES (IMG_VPN_CONNECTOR,'Obj.VPNConnector','vpnc.png','<invalid_hash>',
                	'vpnc.ico','<invalid_hash>');
