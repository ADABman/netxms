<?xml version="1.0" encoding="UTF-8"?>
<?eclipse version="3.2"?>
<plugin>
   <extension-point id="org.netxms.ui.eclipse.datacollection.dciOpenHandlers" name="DCI Open Handlers" schema="schema/org.netxms.ui.eclipse.datacollection.dciOpenHandlers.exsd"/>

   <extension
         point="org.eclipse.ui.views">
      <view
            allowMultiple="true"
            class="org.netxms.ui.eclipse.datacollection.views.DataCollectionEditor"
            icon="icons/dc_editor.png"
            id="org.netxms.ui.eclipse.datacollection.view.data_collection_editor"
            name="Data Collection Configuration"
            restorable="false">
      </view>
      <view
            name="Last Values"
            allowMultiple="true"
            icon="icons/last_values.png"
            class="org.netxms.ui.eclipse.datacollection.views.LastValues"
            id="org.netxms.ui.eclipse.datacollection.view.last_values">
      </view>
      <view
            allowMultiple="false"
            category="org.netxms.ui.eclipse.viewcategory.config"
            class="org.netxms.ui.eclipse.datacollection.views.SummaryTableManager"
            icon="icons/summary_table.png"
            id="org.netxms.ui.eclipse.datacollection.views.SummaryTableManager"
            name="DCI Summary Tables"
            restorable="true">
      </view>
      <view
            allowMultiple="true"
            class="org.netxms.ui.eclipse.datacollection.views.SummaryTable"
            icon="icons/summary_table.png"
            id="org.netxms.ui.eclipse.datacollection.views.SummaryTable"
            name="Summary Table"
            restorable="true">
      </view>
   </extension>
   
   <extension
         point="org.eclipse.ui.popupMenus">
      <objectContribution
            id="org.netxms.ui.eclipse.datacollection.actions.popup.object.Node"
            objectClass="org.netxms.client.objects.Node">
         <action
               class="org.netxms.ui.eclipse.datacollection.actions.OpenEditor"
               enablesFor="1"
               id="org.netxms.ui.eclipse.datacollection.popupActions.OpenEditor#Node"
               label="Data Collection Configuration"
               icon="icons/dc_editor.png"
               menubarPath="datacollection">
         </action>
         <action
               class="org.netxms.ui.eclipse.datacollection.actions.ShowLastValues"
               enablesFor="1"
               icon="icons/last_values.png"
               id="org.netxms.ui.eclipse.datacollection.popupActions.ShowLastValues#Node"
               label="Last values"
               menubarPath="datacollection">
         </action>
      </objectContribution>
      <objectContribution
            id="org.netxms.ui.eclipse.datacollection.actions.popup.object.Template"
            objectClass="org.netxms.client.objects.Template">
         <action
               class="org.netxms.ui.eclipse.datacollection.actions.OpenEditor"
               enablesFor="1"
               id="org.netxms.ui.eclipse.datacollection.popupActions.OpenEditor#Template"
               label="Data Collection Configuration"
               icon="icons/dc_editor.png"
               menubarPath="datacollection">
         </action>
         <action
               class="org.netxms.ui.eclipse.datacollection.actions.RemoveTemplate"
               enablesFor="1"
               id="org.netxms.ui.eclipse.datacollection.popupActions.RemoveTemplate"
               label="&amp;Remove..."
               menubarPath="objectbinding"
               style="push"
               tooltip="Remove template from node(s)">
         </action>
         <action
               class="org.netxms.ui.eclipse.datacollection.actions.ApplyTemplate"
               enablesFor="1"
               id="org.netxms.ui.eclipse.datacollection.popupActions.ApplyTemplate"
               label="&amp;Apply..."
               menubarPath="objectbinding"
               style="push"
               tooltip="Apply template to node(s)">
         </action>
      </objectContribution>
      <objectContribution
            adaptable="false"
            id="org.netxms.ui.eclipse.datacollection.actions.popup.object.TemplateRoot"
            objectClass="org.netxms.client.objects.TemplateRoot">
         <action
               class="org.netxms.ui.eclipse.datacollection.actions.CreateTemplateGroup"
               enablesFor="1"
               id="org.netxms.ui.eclipse.datacollection.popupActions.CreateTemplateGroup#TemplateRoot"
               label="Create template &amp;group..."
               menubarPath="objectcreation">
         </action>
         <action
               class="org.netxms.ui.eclipse.datacollection.actions.CreateTemplate"
               enablesFor="1"
               id="org.netxms.ui.eclipse.datacollection.popupActions.CreateTemplate#TemplateRoot"
               label="Create &amp;template..."
               menubarPath="objectcreation">
         </action>
      </objectContribution>
      <objectContribution
            adaptable="false"
            id="org.netxms.ui.eclipse.datacollection.actions.popup.object.TemplateGroup"
            objectClass="org.netxms.client.objects.TemplateGroup">
         <action
               class="org.netxms.ui.eclipse.datacollection.actions.CreateTemplateGroup"
               enablesFor="1"
               id="org.netxms.ui.eclipse.datacollection.popupActions.CreateTemplateGroup#TemplateGroup"
               label="Create template &amp;group..."
               menubarPath="objectcreation">
         </action>
         <action
               class="org.netxms.ui.eclipse.datacollection.actions.CreateTemplate"
               enablesFor="1"
               id="org.netxms.ui.eclipse.datacollection.popupActions.CreateTemplate#TemplateGroup"
               label="Create &amp;template..."
               menubarPath="objectcreation">
         </action>
      </objectContribution>
      <objectContribution
            adaptable="false"
            id="org.netxms.ui.eclipse.datacollection.actions.popup.object.Interface"
            objectClass="org.netxms.client.objects.Interface">
         <action
               class="org.netxms.ui.eclipse.datacollection.actions.CreateInterfraceDci"
               enablesFor="+"
               id="org.netxms.ui.eclipse.datacollection.popupActions.CreateInterfaceDci#Interface"
               label="Create data collection items..."
               menubarPath="datacollection">
         </action>
      </objectContribution>
      <objectContribution
            adaptable="false"
            id="org.netxms.ui.eclipse.datacollection.actions.popup.object.Cluster"
            objectClass="org.netxms.client.objects.Cluster">
         <action
               class="org.netxms.ui.eclipse.datacollection.actions.OpenEditor"
               enablesFor="1"
               icon="icons/dc_editor.png"
               id="org.netxms.ui.eclipse.datacollection.popupActions.OpenEditor#Cluster"
               label="Data Collection Configuration"
               menubarPath="datacollection">
         </action>
      </objectContribution>
      <objectContribution
            adaptable="false"
            id="org.netxms.ui.eclipse.datacollection.actions.popup.object.DciValue"
            objectClass="org.netxms.client.datacollection.DciValue">
         <action
               class="org.netxms.ui.eclipse.datacollection.actions.ClearCollectedData"
               enablesFor="+"
               icon="icons/clear.gif"
               id="org.netxms.ui.eclipse.datacollection.popupActions.ClearCollectedData_DciValue"
               label="Clear collected data"
               menubarPath="secondary">
         </action>
      </objectContribution>
      <objectContribution
            adaptable="false"
            id="org.netxms.ui.eclipse.datacollection.actions.popup.object.DataCollectionObject"
            objectClass="org.netxms.client.datacollection.DataCollectionObject">
         <action
               class="org.netxms.ui.eclipse.datacollection.actions.ClearCollectedData"
               enablesFor="+"
               icon="icons/clear.gif"
               id="org.netxms.ui.eclipse.datacollection.popupActions.ClearCollectedData_DataCollectionObject"
               label="Clear collected data"
               menubarPath="secondary">
         </action>
      </objectContribution>
      <objectContribution
            adaptable="false"
            id="org.netxms.ui.eclipse.datacollection.actions.popup.object.SnmpValue"
            objectClass="org.netxms.client.snmp.SnmpValue">
         <action
               class="org.netxms.ui.eclipse.datacollection.actions.CreateSnmpDci"
               enablesFor="+"
               id="org.netxms.ui.eclipse.datacollection.popupActions.CreateSnmpDci#SnmpValue"
               label="Create data collection item..."
               menubarPath="additions">
         </action>
      </objectContribution>
      <objectContribution
            id="org.netxms.ui.eclipse.datacollection.actions.popup.object.MobileDevice"
            objectClass="org.netxms.client.objects.MobileDevice">
         <action
               class="org.netxms.ui.eclipse.datacollection.actions.OpenEditor"
               enablesFor="1"
               icon="icons/dc_editor.png"
               id="org.netxms.ui.eclipse.datacollection.popupActions.OpenEditor#MobileDevice"
               label="Data Collection Configuration"
               menubarPath="datacollection">
         </action>
         <action
               class="org.netxms.ui.eclipse.datacollection.actions.ShowLastValues"
               enablesFor="1"
               icon="icons/last_values.png"
               id="org.netxms.ui.eclipse.datacollection.popupActions.ShowLastValues#MobileDevice"
               label="Last values"
               menubarPath="datacollection">
         </action>
      </objectContribution>
   </extension>

  <extension
     point="org.eclipse.ui.propertyPages">
        <page
           id="org.netxms.ui.eclipse.datacollection.propertypages.General#0"
           name="General"
	       class="org.netxms.ui.eclipse.datacollection.propertypages.General">
          <enabledWhen>
             <instanceof
                  value="org.netxms.client.datacollection.DataCollectionItem">
             </instanceof>
          </enabledWhen>
        </page>
        <page
              class="org.netxms.ui.eclipse.datacollection.propertypages.GeneralTable"
              id="org.netxms.ui.eclipse.datacollection.propertypages.GeneralTable#0"
              name="General">
           <enabledWhen>
              <instanceof
                    value="org.netxms.client.datacollection.DataCollectionTable">
              </instanceof>
           </enabledWhen>
        </page>
        <page
           id="org.netxms.ui.eclipse.datacollection.propertypages.CustomSchedule#10"
           name="Custom Schedule"
	       class="org.netxms.ui.eclipse.datacollection.propertypages.CustomSchedule">
          <enabledWhen>
             <instanceof
                  value="org.netxms.client.datacollection.DataCollectionObject">
             </instanceof>
          </enabledWhen>
        </page>
        <page
           id="org.netxms.ui.eclipse.datacollection.propertypages.Transformation#20"
           name="Transformation"
	       class="org.netxms.ui.eclipse.datacollection.propertypages.Transformation">
          <enabledWhen>
             <instanceof
                  value="org.netxms.client.datacollection.DataCollectionObject">
             </instanceof>
          </enabledWhen>
        </page>
        <page
           id="org.netxms.ui.eclipse.datacollection.propertypages.Thresholds#30"
           name="Thresholds"
	       class="org.netxms.ui.eclipse.datacollection.propertypages.Thresholds">
          <enabledWhen>
             <instanceof
                  value="org.netxms.client.datacollection.DataCollectionItem">
             </instanceof>
          </enabledWhen>
        </page>
        <page
              class="org.netxms.ui.eclipse.datacollection.propertypages.TableColumns"
              id="org.netxms.ui.eclipse.datacollection.propertypages.TableColumns#20"
              name="Columns">
           <enabledWhen>
              <instanceof
                    value="org.netxms.client.datacollection.DataCollectionTable">
              </instanceof>
           </enabledWhen>
        </page>
        <page
              class="org.netxms.ui.eclipse.datacollection.propertypages.InstanceDiscovery"
              id="org.netxms.ui.eclipse.datacollection.propertypages.InstanceDiscovery#50"
              name="Instance Discovery">
           <enabledWhen>
              <instanceof
                    value="org.netxms.client.datacollection.DataCollectionItem">
              </instanceof>
           </enabledWhen>
        </page>
        <page
              class="org.netxms.ui.eclipse.datacollection.propertypages.NetworkMaps"
              id="org.netxms.ui.eclipse.datacollection.propertypages.NetworkMaps#110"
              name="Network Maps">
           <enabledWhen>
              <instanceof
                    value="org.netxms.client.datacollection.DataCollectionItem">
              </instanceof>
           </enabledWhen>
        </page>
        <page
              class="org.netxms.ui.eclipse.datacollection.propertypages.SummaryTableGeneral"
              id="org.netxms.ui.eclipse.datacollection.propertypages.SummaryTableGeneral#0"
              name="General">
           <enabledWhen>
              <instanceof
                    value="org.netxms.client.datacollection.DciSummaryTable">
              </instanceof>
           </enabledWhen>
        </page>
        <page
              class="org.netxms.ui.eclipse.datacollection.propertypages.SummaryTableFilter"
              id="org.netxms.ui.eclipse.datacollection.propertypages.SummaryTableFilter#20"
              name="Filter">
           <enabledWhen>
              <instanceof
                    value="org.netxms.client.datacollection.DciSummaryTable">
              </instanceof>
           </enabledWhen>
        </page>
        <page
              class="org.netxms.ui.eclipse.datacollection.propertypages.SummaryTableColumns"
              id="org.netxms.ui.eclipse.datacollection.propertypages.SummaryTableColumns#10"
              name="Columns">
           <enabledWhen>
              <instanceof
                    value="org.netxms.client.datacollection.DciSummaryTable">
              </instanceof>
           </enabledWhen>
        </page>
   </extension>

  <extension
     point="org.eclipse.core.runtime.adapters">
        <factory 
           class="org.netxms.ui.eclipse.datacollection.DataCollectionAdapterFactory" 
           adaptableType="org.netxms.client.datacollection.DataCollectionObject">
          <adapter type="org.eclipse.ui.model.IWorkbenchAdapter"/>
          <adapter
                type="org.netxms.ui.eclipse.datacollection.api.DataCollectionObjectEditor">
          </adapter>
        </factory>
  </extension>

   <extension
         point="org.netxms.ui.eclipse.objectview.tabs">
      <tab
            class="org.netxms.ui.eclipse.datacollection.objecttabs.LastValues"
            icon="icons/last_values.png"
            id="org.netxms.ui.eclipse.datacollection.objecttabs.LastValues"
            name="Last Values"
            order="30">
      </tab>
      <tab
            class="org.netxms.ui.eclipse.datacollection.objecttabs.ThresholdSummary"
            icon="icons/thresholds.gif"
            id="org.netxms.ui.eclipse.datacollection.objecttabs.ThresholdSummary"
            name="Thresholds"
            order="30">
      </tab>
   </extension>
   <extension
         point="org.eclipse.ui.commands">
      <command
            description="Toggle DCI Filter"
            id="org.netxms.ui.eclipse.datacollection.commands.show_dci_filter"
            name="Toggle DCI Filter">
         <defaultHandler
               class="org.netxms.ui.eclipse.datacollection.actions.ToggleDCIFilterHandler">
            <parameter
                  name="default"
                  value="default">
            </parameter>
         </defaultHandler>
         <state
               class="org.eclipse.jface.commands.ToggleState"
               id="org.netxms.ui.eclipse.datacollection.commands.show_dci_filter.state">
         </state>
      </command>
      <command
            categoryId="org.netxms.ui.eclipse.console.category.views"
            description="Open DCI Summary Tables configuration"
            id="org.netxms.ui.eclipse.datacollection.commands.open_dcisumtbl_manager"
            name="DCI Summary Tables">
      </command>
   </extension>
   <extension
         point="org.eclipse.ui.bindings">
      <key
            commandId="org.netxms.ui.eclipse.datacollection.commands.show_dci_filter"
            contextId="org.netxms.ui.eclipse.datacollection.context.LastValues"
            schemeId="org.netxms.ui.eclipse.defaultKeyBinding"
            sequence="Ctrl+F2">
      </key>
   </extension>
   <extension
         point="org.eclipse.ui.contexts">
      <context
            id="org.netxms.ui.eclipse.datacollection.context.LastValues"
            name="Last Values List"
            parentId="org.eclipse.ui.contexts.window">
      </context>
   </extension>
   <extension
         point="org.eclipse.ui.menus">
      <menuContribution
            allPopups="false"
            locationURI="menu:org.netxms.ui.eclipse.objectview.view.tabbed_object_view?after=additions">
         <command
               commandId="org.netxms.ui.eclipse.datacollection.commands.show_dci_filter"
               label="Show DCI &amp;filter"
               style="toggle"
               tooltip="Show/hide DCI filter">
            <visibleWhen
                  checkEnabled="false">
               <with
                     variable="nxmcObjectViewActiveTab">
                  <instanceof
                        value="org.netxms.ui.eclipse.datacollection.objecttabs.LastValues">
                  </instanceof>
               </with>
            </visibleWhen>
         </command>
      </menuContribution>
   </extension>
   <extension
         point="org.eclipse.ui.services">
      <sourceProvider
            provider="org.netxms.ui.eclipse.objectview.services.SourceProvider">
         <variable
               name="nxmcObjectViewActiveTab"
               priorityLevel="workbench">
         </variable>
      </sourceProvider>
   </extension>
   <extension
         point="org.eclipse.ui.actionSets">
      <actionSet
            id="org.netxms.ui.eclipse.datacollection.actionSet"
            label="Data Collection Action Set"
            visible="true">
         <action
               class="org.netxms.ui.eclipse.datacollection.actions.OpenSummaryTablesManager"
               definitionId="org.netxms.ui.eclipse.datacollection.commands.open_dcisumtbl_manager"
               icon="icons/summary_table.png"
               id="org.netxms.ui.eclipse.datacollection.actions.open_dcisumtbl_manager"
               label="DCI Summary Tables"
               menubarPath="config/additions"
               style="push"
               tooltip="Open DCI Summary Table configuration">
         </action>
      </actionSet>
   </extension>
   <extension
         point="org.netxms.ui.eclipse.loginlisteners">
      <loginlistener
            class="org.netxms.ui.eclipse.datacollection.LoginListener">
      </loginlistener>
   </extension>
   <extension
         point="org.eclipse.ui.menus">
      <menuContribution
            locationURI="popup:org.eclipse.ui.popup.any?after=datacollection">
         <dynamic
               class="org.netxms.ui.eclipse.datacollection.SummaryTablesDynamicMenu"
               id="org.netxms.ui.eclipse.datacollection.SummaryTablesDynamicMenu">
            <visibleWhen
                  checkEnabled="false">
               <iterate
                     ifEmpty="false"
                     operator="and">
                  <or>
                     <instanceof
                           value="org.netxms.client.objects.Container">
                     </instanceof>
                     <instanceof
                           value="org.netxms.client.objects.ServiceRoot">
                     </instanceof>
                     <instanceof
                           value="org.netxms.client.objects.Subnet">
                     </instanceof>
                     <instanceof
                           value="org.netxms.client.objects.Cluster">
                     </instanceof>
                     <instanceof
                           value="org.netxms.client.objects.Zone">
                     </instanceof>
                     <instanceof
                           value="org.netxms.client.objects.EntireNetwork">
                     </instanceof>
                  </or>
               </iterate>
            </visibleWhen>
         </dynamic>
      </menuContribution>
   </extension>

</plugin>
