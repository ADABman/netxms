/*
** Input file for database initialization script.
** This file should be processed by C preprocessor to produce
** real initialization script.
**
** ex: syntax=c
*/

#if !defined(DB_MSSQL) && !defined(DB_POSTGRESQL) && !defined(DB_MYSQL) && !defined(DB_ORACLE)
#error Database type should be defined
#endif

// Common constants
#include <nxevent.h>
#include <nms_locks.h>
#include <nximage.h>
#include <netxmsdb.h>
#include <nxnt.h>

// Define common macros for uncommon data types
// and database syntax type
#if defined(DB_MSSQL)

#define DB_SYNTAX	'MSSQL'
#define SQL_TEXT	text
#define SQL_INT64	bigint
#define TABLE_TYPE

#elif defined(DB_POSTGRESQL)

#define DB_SYNTAX	'PGSQL'
#define SQL_TEXT	varchar // change it to oid?
#define SQL_INT64	bigint
#define TABLE_TYPE

#elif defined(DB_ORACLE)

#define DB_SYNTAX	'ORACLE'
#define SQL_TEXT	clob
#define SQL_INT64	number(20)
#define TABLE_TYPE

#else

#define DB_SYNTAX	'MYSQL'
#define SQL_TEXT	blob
#define SQL_INT64	bigint
#define TABLE_TYPE	TYPE=InnoDB

#endif

// String concatenation for multi-line texts
#if defined(DB_MSSQL)
#define CONCAT +
#elif defined(DB_ORACLE)
#define CONCAT ||
#else
#define CONCAT
#endif

// Actual SQL queries
#include "schema.in"
#include "setup.in"
#include "events.in"
#include "images.in"
#include "policy.in"
#include "traps.in"
